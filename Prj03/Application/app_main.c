/*******************************************************************************
 * 文件名：app_main.c（重构自main.c）
 * 项目：  TMS320F28377D 3层架构程序框架
 * 描述：  基于Drivers/Framework/Application的分层架构
 * 
 * 架构说明：
 *   Drivers层：   硬件驱动封装（System/Timer/LED/EMIF）
 *   Framework层： 任务调度器和数据类型定义
 *   Application层：应用业务逻辑
 * 
 * 功能模块：
 *   - 系统时钟初始化 (200MHz)
 *   - GPIO配置和LED控制
 *   - 定时器中断（Timer0: 100us周期）
 *   - EMIF外部存储器接口初始化
 *   - 任务调度器（20ms数据处理、1s/3s LED闪烁）
 * 
 * 作者：  Auto-generated
 * 日期：  2025-10-20
 ******************************************************************************/

#include "app_init.h"
#include "app_task.h"
#include "../Framework/task_scheduler.h"

/******************************************************************************
 * 全局变量定义
 ******************************************************************************/
Uint16 System_Init_Flag = 0;         // 系统初始化完成标志

/******************************************************************************
 * 主函数
 ******************************************************************************/
void main(void)
{
    //========================================================================
    // 应用初始化
    //========================================================================
    App_Init();
    
    System_Init_Flag = 1;   // 标记系统初始化完成
    
    //========================================================================
    // 主循环
    //========================================================================
    while(1)
    {
        // 用户主循环任务
        App_Task_UserMainLoop();

        // 任务调度器运行
        Scheduler_Run();
    }
}

//===========================================================================
// 版本历史
// v2.0 - 2025-10-20 - 重构为3层架构（Drivers/Framework/Application）
// v1.2 - 2025-10-20 - 优化版本，改进命名、添加常量定义、优化结构
// v1.1 - 2025-10-20 - 精简版本，仅保留Timer0，移除Timer1和XINT1
// v1.0 - 2025-10-20 - 创建基础框架
//===========================================================================

