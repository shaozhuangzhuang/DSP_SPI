/*******************************************************************************
 * 文件名：drv_watchdog.h
 * 描述：  看门狗驱动头文件 - TMS320F28377D内部看门狗管理
 * 作者：  Auto-generated
 * 日期：  2025-10-21
 ******************************************************************************/

#ifndef DRV_WATCHDOG_H_
#define DRV_WATCHDOG_H_

#include "F28x_Project.h"

/******************************************************************************
 * 看门狗配置参数
 ******************************************************************************/
// WDCR寄存器配置值
// Bit 6 (WDDIS): 0 = 使能看门狗, 1 = 禁用看门狗
// Bit 5:3 (WDCHK): 101 = 校验位（固定值）
// Bit 2:0 (WDPS): 看门狗预分频
//   000 = /1, 001 = /2, 010 = /4, 011 = /8
//   100 = /16, 101 = /32, 110 = /64, 111 = /64
// WDCR = 0b0_101_110 = 0x002E (使能，64分频)
#define WATCHDOG_CONFIG_ENABLE   0x002E    // 使能看门狗，预分频=64
#define WATCHDOG_CONFIG_DISABLE  0x006E    // 禁用看门狗，预分频=64 @ 200MHz

/******************************************************************************
 * 函数声明
 ******************************************************************************/

/**
 * @brief  看门狗初始化
 * @param  无
 * @return 无
 * @note   检测复位原因，配置看门狗参数并使能
 */
void Drv_Watchdog_Init(void);

/**
 * @brief  看门狗喂狗服务
 * @param  无
 * @return 无
 * @note   清除看门狗计数器，防止系统复位
 *         【重要】禁止在中断服务程序（ISR）中调用！
 */
void Drv_Watchdog_Service(void);

/**
 * @brief  看门狗喂狗 (Kick别名)
 * @param  无
 * @return 无
 * @note   Drv_Watchdog_Service() 的别名函数
 */
void Drv_Watchdog_Kick(void);

#endif /* DRV_WATCHDOG_H_ */

